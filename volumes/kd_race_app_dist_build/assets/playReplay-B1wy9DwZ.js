function d({app:n,horseSprites:b,labelSprites:w,horsePaths:E,replayData:p}){n.__replayTicker&&(console.log("[KD] ðŸ” Clearing previous replay"),n.ticker.remove(n.__replayTicker),n.__replayTicker=null);const j=performance.now(),m=Object.keys(p),s=Object.fromEntries(m.map(y=>[y,0])),h=()=>{const f=performance.now()-j;m.forEach(t=>{var T;const o=p[t];if(!o||o.length===0)return;for(;s[t]<o.length-1&&o[s[t]+1].timeMs<f;)s[t]++;const r=o[s[t]],x=o[s[t]+1]||r,v=(f-r.timeMs)/(x.timeMs-r.timeMs||1),g=r.pct+(x.pct-r.pct)*v,e=(T=E[t])==null?void 0:T.path;if(!e||e.length<2)return;const I=Math.floor(g*e.length),l=Math.min(I,e.length-2),c=e[l],i=e[l+1],k=g*e.length-l,u=c.x+(i.x-c.x)*k,_=c.y+(i.y-c.y)*k,a=b.get(Number(t));if(a){a.position.set(u,_);const N=i.x-c.x,O=i.y-c.y;a.rotation=Math.atan2(O,N)}const M=w.get(Number(t));M&&M.position.set(u,_)})};n.ticker.add(h),n.__replayTicker=h}export{d as playReplay};
