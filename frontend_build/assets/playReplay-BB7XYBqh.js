function D({app:t,horseSprites:k,labelSprites:_,horsePaths:b,replayData:i}){t.__replayTicker&&(console.log("[KD] 🔁 Clearing previous replay"),t.ticker.remove(t.__replayTicker),t.__replayTicker=null);const h=performance.now(),a=Object.keys(i),o=Object.fromEntries(a.map(m=>[m,0])),l=()=>{const f=performance.now()-h;a.forEach(e=>{const n=i[e];if(!n||n.length===0)return;for(;o[e]<n.length-1&&n[o[e]+1].time<f;)o[e]++;const r=n[o[e]],u=n[o[e]+1]||r,T=(f-r.time)/(u.time-r.time||1),w=r.distance+(u.distance-r.distance)*T,c=b.get(Number(e));if(!c||typeof c.getPointAtDistance!="function")return;const{x:g,y:p,rotation:x}=c.getPointAtDistance(w),s=k.get(Number(e));s&&(s.position.set(g,p),s.rotation=x);const y=_.get(Number(e));y&&y.position.set(g,p-20)})};t.ticker.add(l),t.__replayTicker=l}export{D as playReplay};
